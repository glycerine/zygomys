// infix will be contained within {}
(assert (== "list" (type? (macexpand {}))))
(assert (== "nil" (str (infix))))

(assert (== {3 + 4} 7))

{3 + 4}

(assert (== {9 - 8} 1))

(assert (== { 9 - {1 - 3}} 11))

(assert (== {4 + 2 * 3}  10))

(assert (== {4 - 4 / 2}  2))

(assert (== {3 * 2 ** 3}  24))

// and can mix in function calls to infix expressions
(defn f [] 7)
(assert (== -1020  {4 - 2 ** {3 + (f)}}))

(assert (== {true and not false} {not false and true and true}))

// can put infix as arguments to sexp calls
(defn add [a b] (+ a b))
(assert (== (add {4 + 1} {6 - 1}) 10))

//(def a [3 4 5])
//(assert (== "4" (str {a[1]})))
//(assert {a[1] == 4})

{ newvar = 3}
(assert (== newvar 3))

(assert (== {5 mod 3} 2))

{newvar ++}
(assert (== newvar 4))
{newvar --}
(assert (== newvar 3))

// pow should be right associative
(assert (== {2 ** 3 ** 3} 134217728))

// spacing should not matter 
// (assert (== (add {4+1} {6-1}) 10))